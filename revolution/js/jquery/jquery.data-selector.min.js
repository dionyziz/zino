/*
 * Data Selector 1.1
 * April 27, 2010
 * Corey Hart http://www.codenothing.com
 */
(function(h,f){var c,k,e,d,l,b={},i={},j=/\[(.*?)\]$/,a={"$":true,"!":true,"^":true,"*":true,"<":true,">":true,"~":true};function g(m){d=m;if(b[d]){c=b[d].name;k=b[d].value;e=b[d].condition;l=b[d].eqIndex;return true}l=m.indexOf("=");if(l>-1){c=m.substr(0,l);k=m.substr(l+1)||null}else{c=m;k=null}e=c.charAt(c.length-1);if(a[e]===true){c=c.substr(0,c.length-1)}else{if(e==="]"){e=j.exec(c)[1];c=c.replace(j,"")}}if(k&&(e==="<"||e===">")&&k.charAt(0)==="="){k=k.substr(1);e=e+"="}else{if(e==="~"){k=new RegExp(k.substr(1,k.lastIndexOf("/")-1),k.split("/").pop())}else{if(k&&k.substr(0,2)==="=="){e="===";k=k.substr(2)}}}c=c.split(".");b[d]={name:c,value:k,condition:e,eqIndex:l}}h.expr[":"].data=function(p,n,s,r){if(p===f||!s[3]||s[3]==""){return false}else{if(d!==s[3]){g(s[3])}}for(var o=-1,m=c.length,q;++o<m;){if((q=q===f?h.data(p,c[o]):q[c[o]])===f||q===null){return false}}if(l===-1){return true}switch(e){case"!":return q.toString()!==k;case"^":return q.toString().indexOf(k)===0;case"$":return q.toString().substr(q.length-k.length)===k;case"*":return q.toString().indexOf(k)!==-1;case">":return q>k;case">=":return q>=k;case"<":return q<k;case"<=":return q<=k;case"===":return q===(k==="false"?false:true);case"~":return k.test(q.toString());default:return i[e]?i[e].call(p,q,k,n,s,r):(q&&q.toString()===k)}};h.dataSelector=function(n,m){if(h.isFunction(m)){i[n]=m}else{h.extend(i,n||{})}}})(jQuery);
